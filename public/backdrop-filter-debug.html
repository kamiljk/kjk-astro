<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0"
		/>
		<title>Backdrop Filter Debug</title>
		<style>
			:root {
				--frosted-bg: rgba(255, 255, 255, 0.69);
				--frosted-blur: blur(18px) saturate(180%);
				--frosted-border: 1px solid #d6d5c9;
				--frosted-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.12);
				--navbar-height: 76px;
				--navbar-max-width: clamp(340px, 90vw, 1200px);
				--radius-unified: 12px;
			}

			@media (prefers-color-scheme: dark) {
				:root {
					--frosted-bg: rgba(26, 26, 26, 0.92);
					--frosted-border: 1px solid #23232a;
					--frosted-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.32);
				}
			}

			body {
				margin: 0;
				padding: 0;
				min-height: 100vh;
				background: linear-gradient(
					45deg,
					#ff6b6b,
					#4ecdc4,
					#45b7d1,
					#96ceb4,
					#ffeaa7,
					#dda0dd
				);
				background-size: 400% 400%;
				animation: gradientShift 10s ease infinite;
				font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
					sans-serif;
			}

			@keyframes gradientShift {
				0% {
					background-position: 0% 50%;
				}
				50% {
					background-position: 100% 50%;
				}
				100% {
					background-position: 0% 50%;
				}
			}

			.content {
				padding: 100px 20px;
				text-align: center;
				color: white;
				text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
			}

			.test-element {
				position: fixed;
				top: var(--navbar-height);
				left: 0;
				right: 0;
				max-width: var(--navbar-max-width);
				margin: 0 auto;
				padding: 20px;

				/* Test direct CSS values first */
				background: rgba(255, 255, 255, 0.8);
				backdrop-filter: blur(20px) saturate(180%);
				-webkit-backdrop-filter: blur(20px) saturate(180%);
				border: 1px solid rgba(255, 255, 255, 0.3);
				box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.12);
				border-radius: 0 0 12px 12px;
				border-top: none;

				/* Ensure proper stacking context */
				z-index: 1000;
				isolation: isolate;

				/* Debugging info */
				color: #333;
				text-align: center;
			}

			.debug-info {
				margin-top: 20px;
				font-size: 12px;
				opacity: 0.7;
			}

			.test-without-tokens {
				position: fixed;
				top: 200px;
				left: 20px;
				right: 20px;
				max-width: 400px;
				margin: 0 auto;
				padding: 20px;

				/* Direct CSS values */
				background: rgba(255, 255, 255, 0.69);
				backdrop-filter: blur(18px) saturate(180%);
				-webkit-backdrop-filter: blur(18px) saturate(180%);
				border: 1px solid #d6d5c9;
				box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.12);
				border-radius: 12px;

				z-index: 1001;
				isolation: isolate;

				color: #333;
				text-align: center;
			}

			button {
				margin: 10px;
				padding: 10px 20px;
				border: none;
				border-radius: 8px;
				background: rgba(255, 255, 255, 0.2);
				backdrop-filter: blur(10px);
				-webkit-backdrop-filter: blur(10px);
				color: white;
				cursor: pointer;
				transition: all 0.3s ease;
			}

			button:hover {
				background: rgba(255, 255, 255, 0.3);
			}
		</style>
	</head>
	<body>
		<div class="content">
			<h1>Backdrop Filter Debug Test</h1>
			<p>
				This page has a colorful animated gradient background to test
				backdrop-filter blur effects.
			</p>
			<p>Look for the frosted glass elements above.</p>

			<button onclick="toggleTokenElement()">Toggle Token Element</button>
			<button onclick="toggleDirectElement()">Toggle Direct CSS Element</button>
			<button onclick="checkSupport()">Check Browser Support</button>

			<div id="support-info"></div>
		</div>

		<div
			class="test-element"
			id="token-element"
		>
			<h3>Using CSS Design Tokens</h3>
			<p>
				This element uses CSS variables (design tokens) for frosted glass
				effect.
			</p>
			<div class="debug-info">
				<div>backdrop-filter: var(--frosted-blur)</div>
				<div>background: var(--frosted-bg)</div>
			</div>
		</div>

		<div
			class="test-without-tokens"
			id="direct-element"
			style="display: none"
		>
			<h3>Using Direct CSS Values</h3>
			<p>This element uses direct CSS values for frosted glass effect.</p>
			<div class="debug-info">
				<div>backdrop-filter: blur(18px) saturate(180%)</div>
				<div>background: rgba(255, 255, 255, 0.69)</div>
			</div>
		</div>

		<script>
			function toggleTokenElement() {
				const el = document.getElementById("token-element");
				el.style.display = el.style.display === "none" ? "block" : "none";
			}

			function toggleDirectElement() {
				const el = document.getElementById("direct-element");
				el.style.display = el.style.display === "none" ? "block" : "none";
			}

			function checkSupport() {
				const info = document.getElementById("support-info");
				const supportsBackdrop = CSS.supports("backdrop-filter", "blur(1px)");
				const supportsWebkitBackdrop = CSS.supports(
					"-webkit-backdrop-filter",
					"blur(1px)"
				);

				// Get computed values
				const computedStyle = getComputedStyle(document.documentElement);
				const frostedBlur = computedStyle.getPropertyValue("--frosted-blur");
				const frostedBg = computedStyle.getPropertyValue("--frosted-bg");

				// Check actual computed values on test element
				const tokenElement = document.getElementById("token-element");
				const tokenStyle = getComputedStyle(tokenElement);

				info.innerHTML = `
                <div style="background: rgba(0,0,0,0.8); padding: 20px; border-radius: 10px; margin-top: 20px; text-align: left;">
                    <h3 style="color: white; margin-top: 0;">Browser Support & Debug Info:</h3>
                    <p style="color: white;">backdrop-filter support: ${
											supportsBackdrop ? "✅ YES" : "❌ NO"
										}</p>
                    <p style="color: white;">-webkit-backdrop-filter support: ${
											supportsWebkitBackdrop ? "✅ YES" : "❌ NO"
										}</p>
                    <p style="color: white;">CSS Variable --frosted-blur: "${frostedBlur}"</p>
                    <p style="color: white;">CSS Variable --frosted-bg: "${frostedBg}"</p>
                    <p style="color: white;">Computed backdrop-filter: "${
											tokenStyle.backdropFilter
										}"</p>
                    <p style="color: white;">Computed -webkit-backdrop-filter: "${
											tokenStyle.webkitBackdropFilter
										}"</p>
                    <p style="color: white;">User Agent: ${
											navigator.userAgent
										}</p>
                </div>
            `;
			}

			// Auto-check on load
			setTimeout(checkSupport, 1000);
		</script>
	</body>
</html>
