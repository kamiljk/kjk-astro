---
import MainLayout from "../layouts/MainLayout.astro";
import AboutGrid from "../components/AboutGrid.astro";

// Load all posts and extract types for Navbar
const modules = import.meta.glob("./posts/*.md", { eager: true }) as Record<
  string,
  any
>;
const posts = Object.entries(modules).map(([path, mod]) => {
  const filename = path.split("/").pop()!;
  const fm = mod.frontmatter || {};
  return { data: fm, slug: filename.replace(/\.md$/, "") };
});
const allTypes = Array.from(
  new Set(posts.map((f) => f.data?.type).filter(Boolean))
);
---

<MainLayout
  title="About | My Astro Site"
  allTypes={allTypes}
  activeType="about"
>
  <AboutGrid />
</MainLayout>

<style>
  html,
  body {
    margin: 0;
    padding: 0;
  }
</style>
