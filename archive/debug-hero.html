<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0"
		/>
		<title>Debug Hero Card</title>
		<style>
			body {
				font-family: system-ui, sans-serif;
				line-height: 1.5;
				padding: 20px;
			}
			button {
				padding: 10px 15px;
				margin: 10px 0;
				cursor: pointer;
				transition: background-color 0.3s ease, color 0.3s ease,
					box-shadow 0.3s ease;
				border: none; /* Ensure border doesn't change */
			}
			button:hover {
				background-color: #39ff14; /* Neon green */
				color: #000; /* Black text for contrast */
				box-shadow: 0 0 10px #39ff14, 0 0 20px #39ff14; /* Neon glow effect */
			}
			button.pill {
				border-radius: 50px; /* Pill shape */
			}
			button.active {
				background-color: #333;
				color: #fff;
			}
			.debug-panel {
				margin-top: 20px;
				padding: 15px;
				border: 1px solid #ccc;
				background: #f5f5f5;
			}
			pre {
				white-space: pre-wrap;
				background: #eee;
				padding: 10px;
				overflow: auto;
				max-height: 300px;
			}
		</style>
	</head>
	<body>
		<h1>Hero Card Debug Tool</h1>
		<p>This tool helps debug the hero card content loading.</p>

		<button id="test-post">Load Test Post</button>
		<div class="debug-panel">
			<h2>Debug Output</h2>
			<pre id="debug-output">Debug info will appear here...</pre>
		</div>

		<div
			id="hero-card"
			class="hero-card"
		>
			<div class="hero-card-wrapper">
				<div class="hero-card-header">
					<a
						href="#"
						class="hero-back-link"
						id="hero-back-link"
						>← Back</a
					>
					<h1 class="hero-title">Test Title</h1>
					<button
						class="hero-close-btn"
						id="hero-close-btn"
					>
						×
					</button>
				</div>
				<div class="hero-card-content">
					<div class="hero-markdown">
						<div class="loading-indicator">
							<p>Loading content...</p>
						</div>
					</div>
				</div>
			</div>
		</div>

		<script>
			document
				.getElementById("test-post")
				.addEventListener("click", function () {
					const debugOutput = document.getElementById("debug-output");
					const heroCard = document.getElementById("hero-card");
					const heroMarkdown = heroCard.querySelector(".hero-markdown");

					debugOutput.textContent = "Testing post content loading...";

					fetch("/posts/autonomous-zones/")
						.then((response) => {
							debugOutput.textContent += `\nFetch status: ${response.status}`;
							return response.ok
								? response.text()
								: Promise.reject("Failed to fetch content.");
						})
						.then((html) => {
							const parser = new DOMParser();
							const doc = parser.parseFromString(html, "text/html");
							const content = doc.querySelector(
								".post-content, article.post, main .content, .post-page, article"
							);

							if (content) {
								content
									.querySelectorAll("h1, #post-title")
									.forEach((el) => el.remove());
								heroMarkdown.innerHTML = `<div class="post-content-wrapper">${content.innerHTML}</div>`;
								debugOutput.textContent += "\nContent set to hero card.";
								heroCard.classList.add("active");
							} else {
								throw new Error("Content not found with any selector.");
							}
						})
						.catch((error) => {
							debugOutput.textContent += `\nERROR: ${error.message}`;
						});
				});
		</script>
	</body>
</html>
